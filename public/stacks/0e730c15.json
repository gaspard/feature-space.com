{
  "info": {
    "id": "0e730c15",
    "title": "Principe d'inclusion-exclusion - preuves (A)",
    "type": "proofs",
    "level": "regular",
    "chapter": "Principe d'inclusion-exclusion",
    "course": "Graphes et Combinatoire",
    "tags": [
      "combinatoire",
      "inclusion-exclusion",
      "dénombrement",
      "surjections",
      "dérangements",
      "formule du crible"
    ],
    "count": 10
  },
  "cards": [
    {
      "id": "1",
      "stackId": "0e730c15",
      "content": "#### Formule du Binôme Multivariée\n\nProuvez par récurrence sur $n$ la formule suivante, pour des éléments $a_i, b_i$ d'un anneau commutatif :\n\n$$ \\prod_{i=1}^n (a_i + b_i) = \\sum_{I \\subseteq \\llbracket n \\rrbracket} \\left( \\prod_{i \\in I} a_i \\right) \\left( \\prod_{j \\in \\llbracket n \\rrbracket \\setminus I} b_j \\right) $$\n\n<details class=\"hint\">\n\n<summary>Indice</summary>\n\nProcédez par récurrence (induction).\n\nPour l'initialisation, vérifiez le cas $n=1$.\n\nPour l'hérédité, écrivez le produit pour $n+1$ comme le produit pour $n$ multiplié par $(a_{n+1} + b_{n+1})$. Utilisez l'hypothèse de récurrence, développez, et séparez la somme en deux parties (selon que l'indice $n+1$ est dans l'ensemble $I$ ou non).\n\n</details>",
      "solution": "\n\nNous allons prouver la propriété par récurrence sur l'entier $n \\ge 1$.\n\n**Étape 1 : Initialisation**\n\nPour $n=1$, le membre de gauche est $(a_1 + b_1)$.\n\nLe membre de droite est la somme sur les sous-ensembles de $\\{1\\}$. Les sous-ensembles sont $\\emptyset$ et $\\{1\\}$.\n\n- Pour $I = \\emptyset$ : le terme est $(\\prod_{\\emptyset} a_i)(\\prod_{\\{1\\}} b_j) = 1 \\cdot b_1 = b_1$.\n- Pour $I = \\{1\\}$ : le terme est $(\\prod_{\\{1\\}} a_i)(\\prod_{\\emptyset} b_j) = a_1 \\cdot 1 = a_1$.\n\nLa somme est $b_1 + a_1$, ce qui est égal au membre de gauche. La propriété est vraie pour $n=1$.\n\n**Étape 2 : Hérédité**\n\nSupposons la formule vraie pour un rang $n$. Considérons le rang $n+1$ :\n\n$$ \\prod_{i=1}^{n+1} (a_i + b_i) = \\left( \\prod_{i=1}^n (a_i + b_i) \\right) (a_{n+1} + b_{n+1}) $$\n\nPar hypothèse de récurrence :\n\n$$ = \\left[ \\sum_{K \\subseteq \\llbracket n \\rrbracket} \\left( \\prod_{i \\in K} a_i \\right) \\left( \\prod_{j \\in \\llbracket n \\rrbracket \\setminus K} b_j \\right) \\right] (a_{n+1} + b_{n+1}) $$\n\nEn distribuant $(a_{n+1} + b_{n+1})$, nous obtenons deux sommes :\n\n1. Une somme où chaque terme est multiplié par $b_{n+1}$ (correspondant aux sous-ensembles de $\\llbracket n+1 \\rrbracket$ ne contenant pas $n+1$).\n2. Une somme où chaque terme est multiplié par $a_{n+1}$ (correspondant aux sous-ensembles de $\\llbracket n+1 \\rrbracket$ contenant $n+1$).\n\nSoit $I$ un sous-ensemble de $\\llbracket n+1 \\rrbracket$.\n\n- Si $n+1 \\notin I$, alors $I \\subseteq \\llbracket n \\rrbracket$. Le terme correspondant est $\\left( \\prod_{i \\in I} a_i \\right) \\left( \\prod_{j \\in \\llbracket n \\rrbracket \\setminus I} b_j \\right) b_{n+1}$.\n- Si $n+1 \\in I$, posons $K = I \\setminus \\{n+1\\} \\subseteq \\llbracket n \\rrbracket$. Le terme est $\\left( \\prod_{i \\in K} a_i \\right) a_{n+1} \\left( \\prod_{j \\in \\llbracket n \\rrbracket \\setminus K} b_j \\right)$.\n\nEn regroupant ces deux cas, nous couvrons exactement tous les sous-ensembles $I \\subseteq \\llbracket n+1 \\rrbracket$ :\n\n$$ = \\sum_{I \\subseteq \\llbracket n+1 \\rrbracket} \\left( \\prod_{i \\in I} a_i \\right) \\left( \\prod_{j \\in \\llbracket n+1 \\rrbracket \\setminus I} b_j \\right) $$\n\n**Conclusion :**\n\nLa formule est vraie pour tout $n \\ge 1$.\n\n",
      "options": []
    },
    {
      "id": "2",
      "stackId": "0e730c15",
      "content": "#### Principe d'Inclusion-Exclusion (Forme Complémentaire)\n\nSoit $E$ un ensemble fini et $A_1, \\ldots, A_n$ des sous-ensembles de $E$. Prouvez la forme complémentaire du principe d'inclusion-exclusion :\n\n$$ \\left| \\bigcap_{i=1}^n \\overline{A_i} \\right| = \\sum_{I \\subseteq \\llbracket n \\rrbracket} (-1)^{|I|} \\left|\\bigcap_{i \\in I} A_i\\right| $$\n\nOn utilisera la méthode des fonctions caractéristiques (ou indicatrices).\n\n<details class=\"hint\">\n\n<summary>Indice</summary>\n\nUtilisez la fonction indicatrice d'un ensemble, notée $\\mathbb{1}_A(x)$, qui vaut 1 si $x \\in A$ et 0 sinon.\n\nRappelez-vous que $\\mathbb{1}_{\\overline{A}} = 1 - \\mathbb{1}_A$ et que $\\mathbb{1}_{A \\cap B} = \\mathbb{1}_A \\mathbb{1}_B$.\n\nExprimez l'indicatrice de l'intersection des complémentaires comme un produit, développez ce produit (à l'aide de la formule du binôme multivariée), puis somme sur tous les éléments $x \\in E$.\n\n</details>",
      "solution": "\n\nSoit $\\mathbb{1}_S$ la fonction caractéristique (indicatrice) d'un ensemble $S$.\n\n**Étape 1 : Expression de l'indicatrice**\n\nUn élément $x$ appartient à $\\bigcap_{i=1}^n \\overline{A_i}$ si et seulement si $x \\in \\overline{A_i}$ pour tout $i$.\n\nAlgébriquement, cela se traduit par le produit des indicatrices :\n\n$$ \\mathbb{1}_{\\bigcap \\overline{A_i}}(x) = \\prod_{i=1}^n \\mathbb{1}_{\\overline{A_i}}(x) = \\prod_{i=1}^n (1 - \\mathbb{1}_{A_i}(x)) $$\n\n**Étape 2 : Développement algébrique**\n\nAppliquons la formule du binôme multivariée (Concept 3) avec $a_i = -\\mathbb{1}_{A_i}(x)$ et $b_i = 1$.\n\n$$ \\prod_{i=1}^n (1 - \\mathbb{1}_{A_i}(x)) = \\sum_{I \\subseteq \\llbracket n \\rrbracket} \\left( \\prod_{i \\in I} (-\\mathbb{1}_{A_i}(x)) \\right) \\left( \\prod_{j \\notin I} 1 \\right) $$\n\nPuisque $(-1)^{|I|}$ peut être sorti et que $\\prod_{i \\in I} \\mathbb{1}_{A_i} = \\mathbb{1}_{\\bigcap_{i \\in I} A_i}$ :\n\n$$ \\mathbb{1}_{\\bigcap \\overline{A_i}}(x) = \\sum_{I \\subseteq \\llbracket n \\rrbracket} (-1)^{|I|} \\mathbb{1}_{\\bigcap_{i \\in I} A_i}(x) $$\n\n**Étape 3 : Passage au cardinal**\n\nLe cardinal d'un ensemble est la somme de sa fonction indicatrice sur tous les éléments de l'univers $E$ : $|S| = \\sum_{x \\in E} \\mathbb{1}_S(x)$.\n\nSommons l'égalité précédente sur tous les $x \\in E$ :\n\n$$ \\sum_{x \\in E} \\mathbb{1}_{\\bigcap \\overline{A_i}}(x) = \\sum_{x \\in E} \\sum_{I \\subseteq \\llbracket n \\rrbracket} (-1)^{|I|} \\mathbb{1}_{\\bigcap_{i \\in I} A_i}(x) $$\n\nPar linéarité de la somme :\n\n$$ \\left| \\bigcap_{i=1}^n \\overline{A_i} \\right| = \\sum_{I \\subseteq \\llbracket n \\rrbracket} (-1)^{|I|} \\sum_{x \\in E} \\mathbb{1}_{\\bigcap_{i \\in I} A_i}(x) $$\n\n**Conclusion :**\n\n$$ \\left| \\bigcap_{i=1}^n \\overline{A_i} \\right| = \\sum_{I \\subseteq \\llbracket n \\rrbracket} (-1)^{|I|} \\left| \\bigcap_{i \\in I} A_i \\right| $$\n\n",
      "options": []
    },
    {
      "id": "3",
      "stackId": "0e730c15",
      "content": "#### Principe d'Inclusion-Exclusion (Forme Réunion)\n\nEn utilisant la forme complémentaire démontrée précédemment et les lois de De Morgan, prouvez la formule de la réunion :\n\n$$ \\left|\\bigcup_{i=1}^n A_i\\right| = \\sum_{\\emptyset \\neq I \\subseteq \\llbracket n \\rrbracket} (-1)^{|I|+1} \\left|\\bigcap_{i \\in I} A_i\\right| $$\n\n<details class=\"hint\">\n\n<summary>Indice</summary>\n\nPartez de la relation entre une réunion et l'intersection des complémentaires (Lois de De Morgan) : $\\overline{\\bigcup A_i} = \\bigcap \\overline{A_i}$.\n\nUtilisez le fait que pour tout sous-ensemble $S$ d'un univers $E$, $|S| = |E| - |\\overline{S}|$.\n\nAppliquez la formule complémentaire et isolez le terme pour $I = \\emptyset$.\n\n</details>",
      "solution": "\n\n**Étape 1 : Relation avec le complémentaire**\n\nSoit $E$ l'univers contenant les ensembles $A_i$. On sait que le cardinal d'une réunion est le cardinal total moins le cardinal de son complémentaire :\n\n$$ \\left|\\bigcup_{i=1}^n A_i\\right| = |E| - \\left| \\overline{\\bigcup_{i=1}^n A_i} \\right| $$\n\nD'après les lois de De Morgan, le complémentaire de la réunion est l'intersection des complémentaires :\n\n$$ \\left|\\bigcup_{i=1}^n A_i\\right| = |E| - \\left| \\bigcap_{i=1}^n \\overline{A_i} \\right| $$\n\n**Étape 2 : Application de la forme complémentaire**\n\nD'après le concept 2 (forme complémentaire), nous avons :\n\n$$ \\left| \\bigcap_{i=1}^n \\overline{A_i} \\right| = \\sum_{I \\subseteq \\llbracket n \\rrbracket} (-1)^{|I|} \\left| \\bigcap_{i \\in I} A_i \\right| $$\n\nLe terme pour $I = \\emptyset$ est $(-1)^0 |\\bigcap_{i \\in \\emptyset} A_i| = 1 \\cdot |E| = |E|$.\n\nNous pouvons donc sortir ce terme de la somme :\n\n$$ \\left| \\bigcap_{i=1}^n \\overline{A_i} \\right| = |E| + \\sum_{\\emptyset \\neq I \\subseteq \\llbracket n \\rrbracket} (-1)^{|I|} \\left| \\bigcap_{i \\in I} A_i \\right| $$\n\n**Étape 3 : Substitution**\n\nSubstituons ce résultat dans l'équation de l'étape 1 :\n\n$$ \\left|\\bigcup_{i=1}^n A_i\\right| = |E| - \\left( |E| + \\sum_{\\emptyset \\neq I \\subseteq \\llbracket n \\rrbracket} (-1)^{|I|} \\left| \\bigcap_{i \\in I} A_i \\right| \\right) $$\n\nLes termes $|E|$ s'annulent. Il reste :\n\n$$ \\left|\\bigcup_{i=1}^n A_i\\right| = - \\sum_{\\emptyset \\neq I \\subseteq \\llbracket n \\rrbracket} (-1)^{|I|} \\left| \\bigcap_{i \\in I} A_i \\right| $$\n\nOn rentre le signe \"$-$\" dans la somme, ce qui change $(-1)^{|I|}$ en $(-1)^{|I|+1}$.\n\n**Conclusion :**\n\n$$ \\left|\\bigcup_{i=1}^n A_i\\right| = \\sum_{\\emptyset \\neq I \\subseteq \\llbracket n \\rrbracket} (-1)^{|I|+1} \\left| \\bigcap_{i \\in I} A_i \\right| $$\n\n",
      "options": []
    },
    {
      "id": "4",
      "stackId": "0e730c15",
      "content": "#### Application : Nombre de Surjections\n\nSoient $E$ un ensemble à $n$ éléments et $F$ un ensemble à $k$ éléments. Prouvez que le nombre de surjections de $E$ vers $F$ est :\n\n$$ S_{n,k} = \\sum_{j=0}^{k} (-1)^{k-j} \\binom{k}{j} j^n $$\n\n*(Indication : Notez que la formule peut aussi s'écrire en sommant sur le nombre d'éléments exclus).*\n\n<details class=\"hint\">\n\n<summary>Indice</summary>\n\nUtilisez le principe d'inclusion-exclusion sous sa forme complémentaire.\n\nL'univers est l'ensemble de toutes les applications de $E$ dans $F$ (cardinal $k^n$).\n\nDéfinissez les propriétés \"indésirables\" : une fonction $f$ a la propriété $P_i$ si l'élément $y_i \\in F$ n'est pas dans l'image de $f$ (c'est-à-dire $f(x) \\neq y_i$ pour tout $x$).\n\nUne surjection est une fonction qui ne vérifie aucune propriété $P_i$.\n\n</details>",
      "solution": "\n\nSoit $F = \\{y_1, \\ldots, y_k\\}$. Soit $\\mathcal{F}$ l'ensemble de toutes les fonctions de $E$ vers $F$. On a $|\\mathcal{F}| = k^n$.\n\n**Étape 1 : Définition des ensembles à exclure**\n\nPour $i \\in \\{1, \\ldots, k\\}$, définissons l'ensemble $A_i$ comme l'ensemble des fonctions qui n'atteignent pas $y_i$ :\n\n$$ A_i = \\{ f \\in \\mathcal{F} \\mid y_i \\notin \\text{Im}(f) \\} $$\n\nUne fonction est surjective si et seulement si son image est $F$ tout entier, c'est-à-dire qu'elle n'appartient à aucun $A_i$. On cherche donc $|\\bigcap_{i=1}^k \\overline{A_i}|$.\n\n**Étape 2 : Calcul des intersections**\n\nConsidérons une intersection de $m$ ensembles $A_{i_1} \\cap \\dots \\cap A_{i_m}$.\n\nLes fonctions dans cette intersection sont celles dont l'image ne contient aucun des éléments $\\{y_{i_1}, \\dots, y_{i_m}\\}$.\n\nL'image doit être incluse dans $F \\setminus \\{y_{i_1}, \\dots, y_{i_m}\\}$, qui est un ensemble de cardinal $k - m$.\n\nLe nombre de telles fonctions est donc :\n\n$$ |A_{i_1} \\cap \\dots \\cap A_{i_m}| = (k-m)^n $$\n\n**Étape 3 : Application de la formule**\n\nD'après le principe d'inclusion-exclusion :\n\n$$ |\\text{Surjections}| = \\sum_{I \\subseteq \\llbracket k \\rrbracket} (-1)^{|I|} (k - |I|)^n $$\n\nRegroupons les termes selon la taille de l'ensemble $I$. Soit $m = |I|$. Il y a $\\binom{k}{m}$ façons de choisir un sous-ensemble $I$ de taille $m$.\n\n$$ S_{n,k} = \\sum_{m=0}^k (-1)^m \\binom{k}{m} (k-m)^n $$\n\n**Conclusion :**\n\nEn posant le changement de variable $j = k-m$ (si $m=0, j=k$; si $m=k, j=0$), on obtient la forme donnée :\n\n$$ S_{n,k} = \\sum_{j=0}^k (-1)^{k-j} \\binom{k}{k-j} j^n = \\sum_{j=0}^k (-1)^{k-j} \\binom{k}{j} j^n $$\n\n*(Car $\\binom{k}{k-j} = \\binom{k}{j}$)*.\n\n",
      "options": []
    },
    {
      "id": "5",
      "stackId": "0e730c15",
      "content": "#### Application : Nombre de Dérangements\n\nProuvez que le nombre de dérangements $D_n$ d'un ensemble à $n$ éléments est :\n\n$$ D_n = n! \\sum_{k=0}^n \\frac{(-1)^k}{k!} $$\n\n<details class=\"hint\">\n\n<summary>Indice</summary>\n\nUn dérangement est une permutation sans point fixe.\n\nConsidérez l'ensemble univers des permutations $S_n$ (cardinal $n!$).\n\nDéfinissez les ensembles $A_i = \\{ \\sigma \\in S_n \\mid \\sigma(i) = i \\}$ (permutations fixant l'élément $i$).\n\nOn cherche le cardinal de $\\bigcap \\overline{A_i}$.\n\nCalculez le cardinal de l'intersection de $k$ ensembles $A_i$.\n\n</details>",
      "solution": "\n\n**Étape 1 : Structure des intersections**\n\nPour un sous-ensemble d'indices $I \\subseteq \\{1, \\dots, n\\}$ de cardinal $k$, l'intersection $\\bigcap_{i \\in I} A_i$ représente l'ensemble des permutations qui fixent **au moins** tous les éléments $i \\in I$.\n\nSi on fixe $k$ éléments, les $n-k$ autres éléments peuvent être permutés de manière quelconque.\n\nDonc :\n\n$$ \\left| \\bigcap_{i \\in I} A_i \\right| = (n-k)! $$\n\n**Étape 2 : Application du Principe d'Inclusion-Exclusion**\n\nOn cherche le nombre de permutations n'appartenant à aucun $A_i$ (aucun point fixe).\n\n$$ D_n = \\sum_{I \\subseteq \\llbracket n \\rrbracket} (-1)^{|I|} \\left| \\bigcap_{i \\in I} A_i \\right| $$\n\nRegroupons par taille de $I$. Pour une taille $k$ donnée ($0 \\le k \\le n$), il y a $\\binom{n}{k}$ choix pour l'ensemble $I$. Tous ces choix donnent la même taille d'intersection $(n-k)!$.\n\n$$ D_n = \\sum_{k=0}^n (-1)^k \\binom{n}{k} (n-k)! $$\n\n**Étape 3 : Simplification**\n\nUtilisons la définition du coefficient binomial $\\binom{n}{k} = \\frac{n!}{k!(n-k)!}$ :\n\n$$ D_n = \\sum_{k=0}^n (-1)^k \\frac{n!}{k!(n-k)!} (n-k)! $$\n\nLes termes $(n-k)!$ se simplifient :\n\n$$ D_n = \\sum_{k=0}^n (-1)^k \\frac{n!}{k!} $$\n\n**Conclusion :**\n\nEn factorisant par $n!$, on obtient :\n\n$$ D_n = n! \\sum_{k=0}^n \\frac{(-1)^k}{k!} $$\n\n",
      "options": []
    },
    {
      "id": "6",
      "stackId": "0e730c15",
      "content": "#### Cas particulier : Union de 3 ensembles (Vérification)\n\nSans utiliser la formule générale, prouvez \"à la main\" pour trois ensembles finis $A, B, C$ que :\n\n$$ |A \\cup B \\cup C| = |A| + |B| + |C| - (|A \\cap B| + |A \\cap C| + |B \\cap C|) + |A \\cap B \\cap C| $$\n\nen décomposant la réunion en ensembles disjoints ou en utilisant la formule pour 2 ensembles.\n\n<details class=\"hint\">\n\n<summary>Indice</summary>\n\nUtilisez la formule connue pour deux ensembles : $|X \\cup Y| = |X| + |Y| - |X \\cap Y|$.\n\nPosez $X = A \\cup B$ et $Y = C$.\n\nDéveloppez $|(A \\cup B) \\cap C|$ en utilisant la distributivité de l'intersection sur la réunion : $(A \\cup B) \\cap C = (A \\cap C) \\cup (B \\cap C)$.\n\n</details>",
      "solution": "\n\n**Étape 1 : Application itérative de la formule pour 2 ensembles**\n\nConsidérons $A \\cup B \\cup C = (A \\cup B) \\cup C$. Appliquons la formule pour 2 ensembles :\n\n$$ |(A \\cup B) \\cup C| = |A \\cup B| + |C| - |(A \\cup B) \\cap C| $$\n\n**Étape 2 : Développement des termes**\n\nOn sait déjà que $|A \\cup B| = |A| + |B| - |A \\cap B|$.\n\nPour le terme d'intersection, utilisons la distributivité : $(A \\cup B) \\cap C = (A \\cap C) \\cup (B \\cap C)$.\n\nAppliquons à nouveau la formule pour 2 ensembles à cette nouvelle réunion :\n\n$$ |(A \\cap C) \\cup (B \\cap C)| = |A \\cap C| + |B \\cap C| - |(A \\cap C) \\cap (B \\cap C)| $$\n\nLe dernier terme se simplifie car l'intersection est associative et commutative :\n\n$$ (A \\cap C) \\cap (B \\cap C) = A \\cap B \\cap C $$\n\nDonc $|(A \\cup B) \\cap C| = |A \\cap C| + |B \\cap C| - |A \\cap B \\cap C|$.\n\n**Étape 3 : Assemblage**\n\nSubstituons tout dans l'équation de l'étape 1 :\n\n$$ |A \\cup B \\cup C| = (|A| + |B| - |A \\cap B|) + |C| - (|A \\cap C| + |B \\cap C| - |A \\cap B \\cap C|) $$\n\n**Conclusion :**\n\nEn distribuant le signe moins :\n\n$$ |A \\cup B \\cup C| = |A| + |B| + |C| - |A \\cap B| - |A \\cap C| - |B \\cap C| + |A \\cap B \\cap C| $$\n\n",
      "options": []
    },
    {
      "id": "7",
      "stackId": "0e730c15",
      "content": "#### Propriété de la Différence Symétrique\n\nSoit $\\Delta$ la différence symétrique définie par $A \\Delta B = (A \\setminus B) \\cup (B \\setminus A)$.\n\nProuvez en utilisant les fonctions caractéristiques que :\n\n$$ \\mathbb{1}_{A \\Delta B} = \\mathbb{1}_A + \\mathbb{1}_B - 2\\mathbb{1}_A\\mathbb{1}_B $$\n\nEt déduisez-en une relation sur le cardinal $|A \\Delta B|$.\n\n<details class=\"hint\">\n\n<summary>Indice</summary>\n\nRappelez-vous que dans l'algèbre des fonctions indicatrices (valeurs dans $\\{0,1\\}$), l'addition correspond modulo 2 à la différence symétrique, mais ici nous travaillons avec l'addition réelle standard.\n\nUtilisez le fait que $A \\Delta B$ correspond aux éléments qui sont dans $A$ ou dans $B$, mais pas dans les deux.\n\nOn peut écrire $\\mathbb{1}_{A \\cup B} - \\mathbb{1}_{A \\cap B}$.\n\n</details>",
      "solution": "\n\n**Étape 1 : Expression par réunion et intersection**\n\nPar définition, $A \\Delta B = (A \\cup B) \\setminus (A \\cap B)$.\n\nComme $A \\cap B$ est un sous-ensemble de $A \\cup B$, on a pour les fonctions indicatrices :\n\n$$ \\mathbb{1}_{A \\Delta B} = \\mathbb{1}_{A \\cup B} - \\mathbb{1}_{A \\cap B} $$\n\n**Étape 2 : Utilisation des propriétés de base**\n\nOn sait que $\\mathbb{1}_{A \\cap B} = \\mathbb{1}_A \\mathbb{1}_B$.\n\nOn sait aussi (par Inclusion-Exclusion sur les indicatrices) que $\\mathbb{1}_{A \\cup B} = \\mathbb{1}_A + \\mathbb{1}_B - \\mathbb{1}_A \\mathbb{1}_B$.\n\n**Étape 3 : Substitution**\n\n$$ \\mathbb{1}_{A \\Delta B} = (\\mathbb{1}_A + \\mathbb{1}_B - \\mathbb{1}_A \\mathbb{1}_B) - \\mathbb{1}_A \\mathbb{1}_B $$\n\n$$ \\mathbb{1}_{A \\Delta B} = \\mathbb{1}_A + \\mathbb{1}_B - 2\\mathbb{1}_A \\mathbb{1}_B $$\n\n**Conclusion (Passage au cardinal) :**\n\nEn sommant sur tous les éléments de l'univers :\n\n$$ |A \\Delta B| = |A| + |B| - 2|A \\cap B| $$\n\nCeci est cohérent avec le principe d'inclusion-exclusion : on compte $A$ et $B$, mais on retire deux fois l'intersection (une fois pour $A$, une fois pour $B$) car ces éléments ne doivent pas y être.\n\n",
      "options": []
    },
    {
      "id": "8",
      "stackId": "0e730c15",
      "content": "#### Application : Indicatrice d'Euler\n\nSoit $n = p_1 p_2 \\dots p_k$ un produit de $k$ nombres premiers distincts.\n\nProuvez en utilisant le principe d'inclusion-exclusion que le nombre d'entiers dans $\\{1, \\dots, n\\}$ qui sont premiers avec $n$ est :\n\n$$ \\phi(n) = n \\prod_{i=1}^k \\left(1 - \\frac{1}{p_i}\\right) $$\n\n<details class=\"hint\">\n\n<summary>Indice</summary>\n\nUn entier est premier avec $n$ s'il n'est divisible par aucun des facteurs premiers $p_i$.\n\nConsidérez l'ensemble univers $E = \\{1, \\dots, n\\}$.\n\nDéfinissez les ensembles $A_i$ comme les multiples de $p_i$ dans $E$.\n\nCalculez $|A_i|$, $|A_i \\cap A_j|$, etc., puis appliquez la forme complémentaire.\n\n</details>",
      "solution": "\n\n**Étape 1 : Cardinaux des multiples**\n\nL'ensemble $A_i$ contient les multiples de $p_i$ inférieurs ou égaux à $n$.\n\n$$ |A_i| = \\frac{n}{p_i} $$\n\nL'intersection $A_i \\cap A_j$ (pour $i \\neq j$) contient les multiples de $p_i p_j$ (car $p_i, p_j$ sont premiers entre eux).\n\n$$ |A_i \\cap A_j| = \\frac{n}{p_i p_j} $$\n\nDe manière générale, pour un ensemble d'indices $I$ :\n\n$$ \\left| \\bigcap_{i \\in I} A_i \\right| = \\frac{n}{\\prod_{i \\in I} p_i} $$\n\n**Étape 2 : Application du Principe**\n\nOn cherche le nombre d'éléments qui ne sont dans aucun $A_i$ (premiers avec $n$).\n\n$$ \\phi(n) = \\sum_{I \\subseteq \\llbracket k \\rrbracket} (-1)^{|I|} \\frac{n}{\\prod_{i \\in I} p_i} $$\n\nFactorisons par $n$ :\n\n$$ \\phi(n) = n \\sum_{I \\subseteq \\llbracket k \\rrbracket} (-1)^{|I|} \\frac{1}{\\prod_{i \\in I} p_i} $$\n\nOn peut réécrire le terme sous la somme comme $\\prod_{i \\in I} \\left( \\frac{-1}{p_i} \\right)$.\n\n**Étape 3 : Factorisation**\n\nLa somme obtenue est exactement le développement du produit $\\prod_{i=1}^k \\left( 1 - \\frac{1}{p_i} \\right)$ d'après la formule du binôme multivariée (où on choisit soit $1$, soit $-1/p_i$).\n\n**Conclusion :**\n\n$$ \\phi(n) = n \\prod_{i=1}^k \\left(1 - \\frac{1}{p_i}\\right) $$\n\n",
      "options": []
    },
    {
      "id": "9",
      "stackId": "0e730c15",
      "content": "#### Probabilité limite d'un dérangement\n\nEn utilisant la formule des dérangements, prouvez que la limite de la probabilité qu'une permutation tirée au hasard soit un dérangement quand $n$ tend vers l'infini est $1/e$.\n\n<details class=\"hint\">\n\n<summary>Indice</summary>\n\nLa probabilité est $P_n = \\frac{D_n}{n!}$.\n\nUtilisez la formule fermée de $D_n$ dérivée précédemment.\n\nRappelez le développement en série de Taylor de la fonction exponentielle $e^x$ au voisinage de 0, évalué en $x = -1$.\n\n</details>",
      "solution": "\n\n**Étape 1 : Expression de la probabilité**\n\nLe nombre total de permutations est $n!$. Le nombre de dérangements est $D_n$.\n\nLa probabilité est :\n\n$$ P_n = \\frac{D_n}{n!} = \\frac{n! \\sum_{k=0}^n \\frac{(-1)^k}{k!}}{n!} $$\n\n$$ P_n = \\sum_{k=0}^n \\frac{(-1)^k}{k!} $$\n\n**Étape 2 : Limite**\n\nCherchons la limite quand $n \\to \\infty$ :\n\n$$ \\lim_{n \\to \\infty} P_n = \\sum_{k=0}^{\\infty} \\frac{(-1)^k}{k!} $$\n\n**Étape 3 : Série de l'exponentielle**\n\nOn reconnaît le développement en série de Taylor de la fonction $e^x$ autour de 0 :\n\n$$ e^x = \\sum_{k=0}^{\\infty} \\frac{x^k}{k!} $$\n\nEn posant $x = -1$, on obtient :\n\n$$ e^{-1} = \\sum_{k=0}^{\\infty} \\frac{(-1)^k}{k!} $$\n\n**Conclusion :**\n\n$$ \\lim_{n \\to \\infty} \\frac{D_n}{n!} = \\frac{1}{e} \\approx 0.3679 $$\n\n",
      "options": []
    },
    {
      "id": "10",
      "stackId": "0e730c15",
      "content": "#### Calcul exact d'éléments ayant au moins une propriété\n\nSupposons qu'on connaisse les sommes partielles $S_1 = \\sum |A_i|$, $S_2 = \\sum |A_i \\cap A_j|$, etc.\n\nMontrez que si $S_k = 0$ pour tout $k \\ge 2$ (les ensembles sont disjoints deux à deux), alors la formule d'inclusion-exclusion se réduit au principe d'addition simple.\n\n<details class=\"hint\">\n\n<summary>Indice</summary>\n\nC'est une vérification de la cohérence de la formule.\n\nÉcrivez la formule complète de la réunion et remplacez les termes d'intersection de taille $\\ge 2$ par 0.\n\n</details>",
      "solution": "\n\n**Étape 1 : Écriture de la formule**\n\n$$ \\left|\\bigcup_{i=1}^n A_i\\right| = \\sum_{\\emptyset \\neq I \\subseteq \\llbracket n \\rrbracket} (-1)^{|I|+1} \\left|\\bigcap_{i \\in I} A_i\\right| $$\n\n**Étape 2 : Séparation des termes par taille**\n\n$$ = \\sum_{|I|=1} \\left|\\bigcap_{i \\in I} A_i\\right| - \\sum_{|I|=2} \\left|\\bigcap_{i \\in I} A_i\\right| + \\sum_{|I|=3} \\dots $$\n\n$$ = \\sum_{i=1}^n |A_i| - \\sum_{1 \\le i < j \\le n} |A_i \\cap A_j| + \\dots $$\n\n**Étape 3 : Hypothèse d'ensembles disjoints**\n\nSi les ensembles sont disjoints deux à deux, alors pour tout $i \\neq j$, $A_i \\cap A_j = \\emptyset$, donc $|A_i \\cap A_j| = 0$.\n\nA fortiori, toute intersection de 3 ensembles ou plus est aussi vide (car contenue dans une intersection de 2 ensembles).\n\nTous les termes avec $|I| \\ge 2$ sont nuls.\n\n**Conclusion :**\n\nIl ne reste que le premier terme :\n\n$$ \\left|\\bigcup_{i=1}^n A_i\\right| = \\sum_{i=1}^n |A_i| $$\n\nOn retrouve bien le principe d'addition.\n\n",
      "options": []
    }
  ]
}