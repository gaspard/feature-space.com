---
import { generateNavigation, getCurrentPagePath } from "../utils/navigation.ts"
import NavigationReact from "./NavigationReact"
import { make as FontSizeView } from "../view/FontSizeView.gen"

interface Props {
  currentPath?: string
  isMobile?: boolean
}

const { currentPath, isMobile = false } = Astro.props
const url = Astro.url
const activePath = currentPath || getCurrentPagePath(url)

// Generate navigation structure
const navigationItems = await generateNavigation(Astro.url.pathname, 10)
---

<NavigationReact
  navigationItems={navigationItems}
  currentPath={activePath}
  isMobile={isMobile}
  client:visible
/>

<div class="sidebar-font-size-controls">
  <FontSizeView client:only="react" />
</div>

<style>
  /* Additional custom styles if needed */
  nav.sidebar {
    min-height: 100vh;
    position: relative;
  }

  /* Position font size controls fixed on page - always top right */
  .sidebar-font-size-controls {
    position: fixed;
    top: 0.5rem;
    right: 0.75rem;
    z-index: 100;
  }

  /* Smooth transitions for hover effects */
  nav.sidebar a,
  nav.sidebar div {
    transition: all 0.15s ease-in-out;
  }

  /* Active state border styling */
  .border-l-4 {
    border-left-width: 4px;
  }
</style>
